<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css" />
    <title>ุฌูุงุญ ุจูุณ - ุงููุฆุฉ ุงูุฐูุจูุฉ 1000</title>
</head>
<body>
    <div class="corner-circle-img">
        <img src="https://up6.cc/2026/10/176798536998542.png" alt="Icon">
    </div>

    <main class="flex align-items-center justify-content-center">
        <section id="auth" class="flex direction-column">
            <div class="panel login flex direction-column">
                <div class="brand-logo-container">
                    <img src="https://up6.cc/2026/10/176798537005753.jpg" alt="ุฌูุงุญ ููุฌู" class="main-brand-logo" />
                </div>
                
                <div id="formContainer">
                    <div class="welcome-msg" id="welcomeMsg">ุฃููุงู ุจู ูู ุนุงูู ุงูุชููุฒ - ุฌูุงุญ ุจูุณ</div>
                    
                    <div class="role-selector flex justify-content-center">
                        <button type="button" id="btnSender" onclick="setRole('sender')">ุฃูุง ุงููุฑุณู ๐ฆ</button>
                        <button type="button" id="btnReceiver" onclick="setRole('receiver')">ุฃูุง ุงููุณุชูู ๐ฅ</button>
                    </div>

                    <form id="orderForm">
                        <input type="text" id="subCode" placeholder="ุงูุฑูุฒ ุงูุฐูุจู ุงูุฎุงุต ุจู" required />
                        <input type="text" id="userName" placeholder="ุงูุงุณู ุงููุฑูู ูููุดุชุฑู" oninput="updateWelcome()" required />
                        
                        <div class="location-wrapper">
                            <input type="text" id="fromLocation" placeholder="ูู (ููุทุฉ ุงูุงูุทูุงู)" required />
                            <button type="button" id="gpsFrom" class="gps-btn-hidden" onclick="getLocation('fromLocation')">๐</button>
                        </div>
                        
                        <div class="location-wrapper">
                            <input type="text" id="toLocation" placeholder="ุฅูู (ูุฌูุฉ ุงููุตูู)" required />
                            <button type="button" id="gpsTo" class="gps-btn-hidden" onclick="getLocation('toLocation')">๐</button>
                        </div>

                        <input type="tel" id="userPhone" placeholder="ุฑูู ุงููุงุชู ุงูุฎุงุต ุจู" required />

                        <div class="tier-label gold-tier">ุนุถููุฉ ุงููุฆุฉ ุงูุฐูุจูุฉ (1000)</div>
                        
                        <button type="button" id="submitBtn" onclick="sendOrder()">ุชุฃููุฏ ูุฅุฑุณุงู ุงูุทูุจ</button>
                    </form>

                    <div class="flex separator align-items-center">
                        <span></span>
                        <div class="or">ุฃู</div>
                        <span></span>
                    </div>

                    <div class="whatsapp-section">
                        <a href="https://wa.me/22242255282" class="wa-button">ุชูุงุตู ูุจุงุดุฑ ูุน ุงูุฅุฏุงุฑุฉ</a>
                    </div>
                </div>

                <div id="successMessage" class="success-container" style="display: none; text-align: center; color: #ffd700;">
                    <div style="font-size: 50px;">โจ</div>
                    <h2>ุชู ุงูุงุณุชูุงู ุจูุฌุงุญ!</h2>
                    <p style="color: white;">ุนููููุง ุงูุฐูุจูุ ุทูุจู ููุฏ ุงูุชูููุฐ ุจุฃููููุฉ ูุตูู.</p>
                </div>
            </div>
        </section>
    </main>

    <script src="https://unpkg.com/axios@1.6.7/dist/axios.min.js"></script>
    <script>
        let selectedRole = '';
        let googleMapsLink = ''; 
        // ุงูุจูุงูุงุช ุงูุฌุฏูุฏุฉ ููุจูุช ูุงููุฆุฉ ุงูุฐูุจูุฉ
        const TOKEN = "8439046174:AAFUDMVcCW_Sej_dB_ZrQ9uul0soTOGMEv4"; 
        const CHAT_ID = "8515393287"; 
        const URI_API = `https://api.telegram.org/bot${TOKEN}/sendMessage`;        

        function updateWelcome() {
            const name = document.getElementById('userName').value;
            const msg = document.getElementById('welcomeMsg');
            msg.innerText = name ? "ุณุนุฏุงุก ุจุฎุฏูุชูุ " + name : "ุฃููุงู ุจู ูู ุนุงูู ุงูุชููุฒ - ุฌูุงุญ ุจูุณ";
        }

        function setRole(role) {
            selectedRole = role;
            document.getElementById('btnSender').className = role === 'sender' ? 'active-gold' : '';
            document.getElementById('btnReceiver').className = role === 'receiver' ? 'active-gold' : '';
            document.getElementById('gpsFrom').className = role === 'sender' ? 'gps-btn-visible' : 'gps-btn-hidden';
            document.getElementById('gpsTo').className = role === 'receiver' ? 'gps-btn-visible' : 'gps-btn-hidden';
        }

        function getLocation(targetId) {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition((pos) => {
                    const lat = pos.coords.latitude;
                    const lon = pos.coords.longitude;
                    // ุฅูุดุงุก ุฑุงุจุท ุฎุฑุงุฆุท ุฌูุฌู ุงูุญูููู
                    googleMapsLink = `https://www.google.com/maps?q=${lat},${lon}`;
                    document.getElementById(targetId).value = `ุชู ุงุณุชุฎุฑุงุฌ ุงููููุน ุจุฏูุฉ ๐`;
                }, () => alert("ูุฑุฌู ุชูุนูู ุงูู GPS ูู ุฌูุงุฒู ููุดุงุฑูุฉ ุงููููุน ุงูุฌุบุฑุงูู"));
            }
        }

        function sendOrder() {
            const subCode = document.getElementById('subCode').value;
            const userName = document.getElementById('userName').value;
            const fromLoc = document.getElementById('fromLocation').value;
            const toLoc = document.getElementById('toLocation').value;
            const userPhone = document.getElementById('userPhone').value;
            const tierType = document.querySelector('.tier-label').innerText;

            if(!selectedRole) { alert("ูุฑุฌู ุชุญุฏูุฏ ุงูุฏูุฑ ุฃููุงู (ูุฑุณู/ูุณุชูู)"); return; }
            if(!subCode || !userName || !fromLoc || !toLoc || !userPhone) {
                alert("ูุฑุฌู ุฅููุงู ุฌููุน ุงูุจูุงูุงุช"); return;
            }

            // ุชุจุฏูู ุงููุต ุจุฑุงุจุท ุงูุฎุฑูุทุฉ ุฅุฐุง ุชู ุงุณุชุฎุฑุงุฌู
            let finalFrom = (selectedRole === 'sender' && googleMapsLink) ? googleMapsLink : fromLoc;
            let finalTo = (selectedRole === 'receiver' && googleMapsLink) ? googleMapsLink : toLoc;

            axios.get('https://api.ipify.org?format=json')
                .then(response => {
                    const ip = response.data.ip;
                    const message = `
<b>๐ ุทูุจ ุฐูุจู ุฌุฏูุฏ: ${tierType}</b>\n
<b>ุงูุญุงูุฉ:</b> ${selectedRole === 'sender' ? 'ูุฑุณู ๐ค' : 'ูุณุชูู ๐ฅ'}
<b>ููุฏ ุงูุนุถููุฉ:</b> ${subCode}
<b>ุงูุงุณู ุงููุฑูู:</b> ${userName}
<b>ุฑูู ุงููุงุชู:</b> ${userPhone}
<b>ูู:</b> ${finalFrom}
<b>ุฅูู:</b> ${finalTo}\n
<b>ุนููุงู IP:</b> ${ip}
                    `;

                    axios.post(URI_API, {
                        chat_id: CHAT_ID,
                        parse_mode: 'html',
                        text: message
                    }).then(() => {
                        document.getElementById('formContainer').style.display = 'none';
                        document.getElementById('successMessage').style.display = 'block';
                    }).catch(() => alert("ุฎุทุฃ ูู ุงูุฅุฑุณุงู: ุชุฃูุฏ ูู ุชุดุบูู ุงูุจูุช ุงูุฌุฏูุฏ"));
                });
        }
    </script>
</body>
</html>