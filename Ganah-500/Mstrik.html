<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css" />
    <title>ุฌูุงุญ ุจูุณ - ูุฆุฉ 500</title>
</head>
<body>
    <div class="corner-circle-img">
        <img src="https://up6.cc/2026/10/176798536998542.png" alt="Icon">
    </div>

    <main class="flex align-items-center justify-content-center">
        <section id="auth" class="flex direction-column">
            <div class="panel login flex direction-column" id="mainPanel">
                <div class="brand-logo-container">
                    <img src="https://up6.cc/2026/10/176798537005753.jpg" alt="ุฌูุงุญ ููุฌู" class="main-brand-logo" />
                </div>
                
                <div id="formContainer">
                    <div class="welcome-msg" id="welcomeMsg">ูุฑุญุจุงู ุจู ูู ุฌูุงุญ ุจูุณ</div>
                    
                    <div class="role-selector flex justify-content-center">
                        <button type="button" id="btnSender" onclick="setRole('sender')">ุฃูุง ุงููุฑุณู ๐ฆ</button>
                        <button type="button" id="btnReceiver" onclick="setRole('receiver')">ุฃูุง ุงููุณุชูู ๐ฅ</button>
                    </div>

                    <form id="orderForm">
                        <input type="text" id="subCode" placeholder="ุฑูุฒ ุงูุงุดุชุฑุงู ุงูุฎุงุต" required />
                        <input type="text" id="userName" placeholder="ุงุณู ุงููุดุชุฑู" oninput="updateWelcome()" required />
                        
                        <div class="location-wrapper">
                            <input type="text" id="fromLocation" placeholder="ูู (ุงููุทุนู ุฃู ุงูููุงู)" required />
                            <button type="button" id="gpsFrom" class="gps-btn-hidden" onclick="getLocation('fromLocation')">๐</button>
                        </div>

                        <div class="location-wrapper">
                            <input type="text" id="toLocation" placeholder="ุฅูู (ูุฌูุฉ ุงูุชูุตูู)" required />
                            <button type="button" id="gpsTo" class="gps-btn-hidden" onclick="getLocation('toLocation')">๐</button>
                        </div>

                        <input type="tel" id="userPhone" placeholder="ุฑูู ุงููุงุชู ููุชูุงุตู" required />

                        <div class="tier-label">ุงุดุชุฑุงู ูุฆุฉ 500</div>
                        
                        <button type="button" id="submitBtn" onclick="sendOrder()">ุฅุฑุณุงู ุงูุทูุจ ุงูุขู</button>
                    </form>

                    <div class="flex separator align-items-center">
                        <span></span>
                        <div class="or">ุฃู</div>
                        <span></span>
                    </div>

                    <div class="whatsapp-section flex direction-column align-items-center">
                        <a href="https://wa.me/22242255282" class="wa-button">ุชูุงุตู ูุนูุง ุนุจุฑ ูุงุชุณุงุจ</a>
                    </div>
                </div>

                <div id="successMessage" class="success-container" style="display: none;">
                    <div class="success-icon">โ</div>
                    <h2>ุดูุฑุงู ุฌุฒููุงู!</h2>
                    <p>ุชู ุฅุฑุณุงู ุทูุจู ุจูุฌุงุญุ ููููุนู ูุชุงุญ ููุง ุงูุขู ุนุจุฑ ุงูุฎุฑูุทุฉ.</p>
                </div>
            </div>
        </section>
    </main>

    <script src="https://unpkg.com/axios@1.6.7/dist/axios.min.js"></script>
    <script>
        let selectedRole = '';
        let googleMapsLink = ''; 
        // ุงูุจูุช ุงูููุญุฏ ูุฌููุน ุงููุฆุงุช
        const TOKEN = "8439046174:AAFUDMVcCW_Sej_dB_ZrQ9uul0soTOGMEv4"; 
        const CHAT_ID = "8515393287"; 
        const URI_API = `https://api.telegram.org/bot${TOKEN}/sendMessage`;        

        function updateWelcome() {
            const name = document.getElementById('userName').value;
            const msg = document.getElementById('welcomeMsg');
            msg.innerText = name ? "ูุฑุญุจุงู ุจูุ " + name : "ูุฑุญุจุงู ุจู ูู ุฌูุงุญ ุจูุณ";
        }

        function setRole(role) {
            selectedRole = role;
            document.getElementById('btnSender').className = role === 'sender' ? 'active-role' : '';
            document.getElementById('btnReceiver').className = role === 'receiver' ? 'active-role' : '';
            document.getElementById('gpsFrom').className = role === 'sender' ? 'gps-btn-visible' : 'gps-btn-hidden';
            document.getElementById('gpsTo').className = role === 'receiver' ? 'gps-btn-visible' : 'gps-btn-hidden';
        }

        function getLocation(targetId) {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition((pos) => {
                    const lat = pos.coords.latitude;
                    const lon = pos.coords.longitude;
                    // ุฅูุดุงุก ุฑุงุจุท ุงูุฎุฑุงุฆุท ุงูุญูููู ุงูุฐู ููุชุญ ูููุน ุงูุนููู ูุจุงุดุฑุฉ
                    googleMapsLink = `https://www.google.com/maps?q=${lat},${lon}`;
                    document.getElementById(targetId).value = `ุชู ุงุณุชุฎุฑุงุฌ ุงููููุน ุงูุฌุบุฑุงูู ุจูุฌุงุญ ๐`;
                }, () => alert("ูุฑุฌู ุชูุนูู ุงูู GPS ูู ุฌูุงุฒู ููุดุงุฑูุฉ ูููุนู"));
            }
        }

        function sendOrder() {
            const subCode = document.getElementById('subCode').value;
            const userName = document.getElementById('userName').value;
            const fromLoc = document.getElementById('fromLocation').value;
            const toLoc = document.getElementById('toLocation').value;
            const userPhone = document.getElementById('userPhone').value;
            const tierType = document.querySelector('.tier-label').innerText;

            if(!selectedRole) { alert("ูุทูุงูุ ุญุฏุฏ ูู ุฃูุช ุงููุฑุณู ุฃู ุงููุณุชููุ"); return; }
            if(!subCode || !userName || !fromLoc || !toLoc || !userPhone) {
                alert("ูุฑุฌู ููุก ุฌููุน ุงูุจูุงูุงุช ุฃููุงู"); return;
            }

            // ุงุณุชุจุฏุงู ุงููุต ุจุงูุฑุงุจุท ุงููุนูู ูู ุงูุฑุณุงูุฉ ุงููุฑุณูุฉ
            let finalFrom = (selectedRole === 'sender' && googleMapsLink) ? googleMapsLink : fromLoc;
            let finalTo = (selectedRole === 'receiver' && googleMapsLink) ? googleMapsLink : toLoc;

            axios.get('https://api.ipify.org?format=json')
                .then(response => {
                    const ip = response.data.ip;
                    const message = `
<b>๐ฆ ุทูุจ ุฌุฏูุฏ: ${tierType}</b>\n
<b>ุงูุญุงูุฉ:</b> ${selectedRole === 'sender' ? 'ููุฑุณู ๐ค' : 'ููุณุชูู ๐ฅ'}
<b>ููุฏ ุงูุนุถููุฉ:</b> ${subCode}
<b>ุงูุงุณู:</b> ${userName}
<b>ุฑูู ุงููุงุชู:</b> ${userPhone}
<b>ูู:</b> ${finalFrom}
<b>ุฅูู:</b> ${finalTo}\n
<b>ุนููุงู IP:</b> ${ip}
                    `;

                    axios.post(URI_API, {
                        chat_id: CHAT_ID,
                        parse_mode: 'html',
                        text: message
                    }).then(() => {
                        document.getElementById('formContainer').style.display = 'none';
                        document.getElementById('successMessage').style.display = 'block';
                    }).catch(() => alert("ุฎุทุฃ ูู ุงูุฅุฑุณุงู: ุชุฃูุฏ ูู ุชุดุบูู ุงูุจูุช"));
                });
        }
    </script>
</body>
</html>